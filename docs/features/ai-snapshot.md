# AI 快照功能

## 功能简介

AI 快照是一个将长文章浓缩为精美分享卡片的功能。通过 AI 自动提取文章核心内容,生成适合社交分享的图片。

## 核心特性

### 1. AI 内容提取
- **一句话直击**: 比标题更辛辣的核心总结 (≤40字)
- **3 点关键摘要**: 高信息密度的要点列表 (每条≤25字)
- **情绪标签**: 🔥 热议 | ⚠️ 预警 | 📈 利好 | 📉 看跌 | 📊 数据 | 💡 深度 | 🎯 趋势
- **关键数据/金句**: 最震撼的数据或最犀利的观点 (≤30字)

### 2. 三种卡片风格

#### 商务简报风 (Business)
- 白底黑字,极简专业
- 适合正式报道和商业新闻
- 强调信息密度和可读性

#### 黑金深邃风 (Deep)
- 深色模式,科技感强
- 适合科技报道和深度分析
- 营造沉浸式阅读体验

#### 社交海报风 (Social)
- 大图模式,易分享
- 适合情感类和生活类新闻
- 优化社交媒体展示效果

### 3. 分享功能
- 一键下载 PNG 图片 (1200x1600 竖屏 9:16)
- 支持 Web Share API 直接分享
- 自动添加 NewsBox 水印和二维码

## 使用方式

### 1. 在阅读页生成快照
1. 打开任意文章阅读页
2. 点击顶部导航栏的"AI快照"按钮 (相机图标)
3. 等待 AI 分析内容 (约 3-5 秒)
4. 预览生成的快照卡片

### 2. 切换卡片风格
- 在弹窗中选择三种风格之一
- 系统会自动重新生成对应风格的快照

### 3. 下载和分享
- 点击"下载"按钮保存到本地
- 点击"分享"按钮通过系统分享功能发送

## API 接口

### 生成快照图片
```
GET /api/snapshot?title={title}&content={content}&template={template}
```

**参数说明:**
- `title` (可选): 文章标题
- `content` (必需): 文章内容 (文本格式)
- `noteId` (可选): 笔记 ID (替代 title+content)
- `template` (可选): 卡片风格 - `business` | `deep` | `social` (默认: `business`)

**返回:**
- PNG 图片 (1200x1600)

## 技术实现

### 架构
1. **AI 分析层** (`lib/services/snapshot.ts`)
   - 调用 OpenAI API 进行内容分析
   - 输出结构化的 JSON 数据

2. **图片生成层** (`app/api/snapshot/route.tsx`)
   - 使用 Vercel `@vercel/og` (基于 Satori)
   - 在 Edge Runtime 中高性能渲染
   - 支持自定义模版

3. **前端交互层** (`components/reader/SnapshotModal.tsx`)
   - 模版选择器
   - 图片预览
   - 下载/分享功能

### 依赖
- `@vercel/og`: 图片生成 (Satori)
- OpenAI/DeepSeek API: 内容分析
- Framer Motion: 交互动画

## 环境配置

确保 `.env.local` 中配置了以下环境变量:

```bash
# OpenAI API (用于 AI 内容分析)
OPENAI_API_KEY=sk-xxx
OPENAI_API_BASE_URL=https://api.openai.com/v1  # 可选
OPENAI_MODEL=gpt-4o  # 可选,默认 gpt-4o
```

## 产品定位

AI 快照的核心价值:
1. **极速获取 (TL;DR)**: 不用读全文,看图就知道发生了什么
2. **社交炫耀 (Social Currency)**: 极易分享,带 NewsBox 水印自然传播
3. **证据留存 (Archive)**: 即使原链接失效,快照依然保存核心信息

## 未来优化方向

1. **关联知识彩蛋**: 自动打上智能专题标签 (如 #CES 2025)
2. **记者视角**: 允许用户添加个人点评,以手写体印在卡片上
3. **更多模版**: 根据内容类型自动推荐模版
4. **批量生成**: 支持为文件夹内所有文章生成快照
5. **自定义品牌**: 允许用户替换水印和二维码
