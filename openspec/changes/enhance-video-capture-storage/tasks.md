## 1. 视频下载功能实现
- [ ] 1.1 研究抖音、B站等平台的视频下载方法（API、爬虫工具或第三方服务）
- [ ] 1.2 选择合适的视频下载库（如 yt-dlp、puppeteer 等）
- [ ] 1.3 实现视频 URL 识别逻辑（检测是否为视频平台 URL）
- [ ] 1.4 实现视频文件下载功能（支持流式下载，处理大文件）

## 2. Supabase Storage 集成
- [ ] 2.1 确认 `user-files` bucket 配置支持视频文件（大小限制、类型限制）
- [ ] 2.2 实现视频文件上传到 Supabase Storage 的逻辑
- [ ] 2.3 设置合适的存储路径结构：`{user_id}/videos/{timestamp}-{filename}`
- [ ] 2.4 处理文件名清理（移除特殊字符，确保安全）

## 3. 抓取 API 增强
- [ ] 3.1 修改 `app/api/capture/route.ts`，添加视频下载逻辑
- [ ] 3.2 在视频类型检测后，触发视频文件下载流程
- [ ] 3.3 下载成功后，更新笔记的 `media_url` 为 Supabase Storage URL
- [ ] 3.4 实现错误处理和降级策略（下载失败时保留原始 URL）

## 4. 视频新闻抓取支持
- [ ] 4.1 确保视频类型的内容可以完整抓取（元数据 + 文件）
- [ ] 4.2 验证视频新闻笔记的创建流程
- [ ] 4.3 测试视频文件在笔记详情页的展示

## 5. 测试与优化
- [ ] 5.1 编写单元测试：视频下载功能
- [ ] 5.2 编写集成测试：视频抓取完整流程
- [ ] 5.3 测试大文件下载的性能和超时处理
- [ ] 5.4 测试不同视频平台（抖音、B站、快手、YouTube 等）的兼容性


